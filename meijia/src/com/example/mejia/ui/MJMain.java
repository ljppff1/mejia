package com.example.mejia.ui;import com.example.meijia.R;import com.example.mejia.fragment.MJFragment;import com.example.mejia.fragment.MoFragment;import com.example.mejia.fragment.MyFragment;import com.example.mejia.fragment.OdFragment;import com.example.mejia.util.DummyTabContent;import android.os.Bundle;import android.support.v4.app.FragmentActivity;import android.support.v4.app.FragmentTransaction;import android.view.LayoutInflater;import android.view.Window;import android.widget.ImageView;import android.widget.LinearLayout;import android.widget.TabHost;import android.widget.TabWidget;import android.widget.TextView;public class MJMain extends FragmentActivity{	private TabHost tabHost;	private TabWidget tabWidget;	LinearLayout tabIndicator1,tabIndicator2,tabIndicator3,tabIndicator4;	private MJFragment mJFragment;	private OdFragment odFragment;	private MyFragment myFragment;	private MoFragment moFragment;	private FragmentTransaction ft;	int CURRENT_TAB = 0;	@Override	protected void onCreate(Bundle arg0) {		super.onCreate(arg0);		this.requestWindowFeature(Window.FEATURE_NO_TITLE);		setContentView(R.layout.mjmain);		   findTabView();		   tabHost.setup();			        TabHost.OnTabChangeListener tabChangeListener = new TabHost.OnTabChangeListener(){				@Override				public void onTabChanged(String tabId) {					android.support.v4.app.FragmentManager fm =  getSupportFragmentManager();					mJFragment = (MJFragment) fm.findFragmentByTag("MJ");					odFragment = (OdFragment) fm.findFragmentByTag("Od");					myFragment = (MyFragment) fm.findFragmentByTag("My");					moFragment	=(MoFragment) fm.findFragmentByTag("Mo");					ft = fm.beginTransaction();					if(mJFragment!=null)						ft.detach(mJFragment);					if(odFragment!=null)						ft.detach(odFragment);					if(myFragment!=null)						ft.detach(myFragment);					if(moFragment!=null)						ft.detach(moFragment);					if(tabId.equalsIgnoreCase("MJ")){				    	if(mJFragment==null){									ft.add(R.id.realtabcontent,new MJFragment(), "MJ");												}else{							ft.attach(mJFragment);												}						CURRENT_TAB = 1;					}else if(tabId.equalsIgnoreCase("Od")){				    	if(odFragment==null){									ft.add(R.id.realtabcontent,new OdFragment(), "Od");												}else{							ft.attach(odFragment);												}						CURRENT_TAB	=	2;					}else if(tabId.equalsIgnoreCase("My")){					    	if(myFragment==null){									ft.add(R.id.realtabcontent,new MyFragment(), "My");												}else{							ft.attach(myFragment);												}						CURRENT_TAB = 3;					}else if(tabId.equalsIgnoreCase("Mo")){					    	if(moFragment==null){									ft.add(R.id.realtabcontent,new MoFragment(), "Mo");												}else{							ft.attach(moFragment);												}						CURRENT_TAB = 4;					}else{						switch (CURRENT_TAB) {						case 1:					    	if(mJFragment==null){										ft.add(R.id.realtabcontent,new MJFragment(), "MJ");													}else{								ft.attach(mJFragment);													}							break;						case 2:					    	if(odFragment==null){										ft.add(R.id.realtabcontent,new OdFragment(), "Od");													}else{								ft.attach(odFragment);													}							break;						case 3:					    	if(myFragment==null){										ft.add(R.id.realtabcontent,new MyFragment(), "My");													}else{								ft.attach(myFragment);													}							break;						case 4:					    	if(moFragment==null){										ft.add(R.id.realtabcontent,new MoFragment(), "Mo");													}else{								ft.attach(moFragment);													}							break;						default:					    	if(mJFragment==null){										ft.add(R.id.realtabcontent,new MJFragment(), "MJ");													}else{								ft.attach(mJFragment);													}							break;						}													}						ft.commit();					}	        };	        tabHost.setCurrentTab(0);	        tabHost.setOnTabChangedListener(tabChangeListener);	        initTab();	        tabHost.setCurrentTab(0);	}    public void initTab(){    	        TabHost.TabSpec tSpecHome = tabHost.newTabSpec("MJ");        tSpecHome.setIndicator(tabIndicator1);                tSpecHome.setContent(new DummyTabContent(getBaseContext()));        tabHost.addTab(tSpecHome);                TabHost.TabSpec tSpecCamera = tabHost.newTabSpec("Od");        tSpecCamera.setIndicator(tabIndicator2);                tSpecCamera.setContent(new DummyTabContent(getBaseContext()));        tabHost.addTab(tSpecCamera);             TabHost.TabSpec tSpecMessage = tabHost.newTabSpec("My");        tSpecMessage.setIndicator(tabIndicator3);              tSpecMessage.setContent(new DummyTabContent(getBaseContext()));        tabHost.addTab(tSpecMessage);                TabHost.TabSpec tSpecMe = tabHost.newTabSpec("Mo");        tSpecMe.setIndicator(tabIndicator4);                tSpecMe.setContent(new DummyTabContent(getBaseContext()));        tabHost.addTab(tSpecMe);            }	private void findTabView() {	   	 tabHost = (TabHost) findViewById(android.R.id.tabhost);         tabWidget = (TabWidget) findViewById(android.R.id.tabs);         LinearLayout layout = (LinearLayout)tabHost.getChildAt(0);         TabWidget tw = (TabWidget)layout.getChildAt(1);                  tabIndicator1 = (LinearLayout) LayoutInflater.from(this)         		.inflate(R.layout.tab_indicator, tw, false);         TextView tvTab1 = (TextView)tabIndicator1.getChildAt(1);         ImageView ivTab1 = (ImageView)tabIndicator1.getChildAt(0);         ivTab1.setBackgroundResource(R.drawable.selector_mood_photograph);         tvTab1.setText(R.string.buttom_home);                  tabIndicator2 = (LinearLayout) LayoutInflater.from(this)         		.inflate(R.layout.tab_indicator, tw, false);         TextView tvTab2 = (TextView)tabIndicator2.getChildAt(1);         ImageView ivTab2 = (ImageView)tabIndicator2.getChildAt(0);         ivTab2.setBackgroundResource(R.drawable.selector_mood_message);         tvTab2.setText(R.string.buttom_wall);                  tabIndicator3 = (LinearLayout) LayoutInflater.from(this)         		.inflate(R.layout.tab_indicator, tw, false);         TextView tvTab3 = (TextView)tabIndicator3.getChildAt(1);         ImageView ivTab3 = (ImageView)tabIndicator3.getChildAt(0);         ivTab3.setBackgroundResource(R.drawable.selector_mood_home);         tvTab3.setText(R.string.buttom_camera);                   tabIndicator4 = (LinearLayout) LayoutInflater.from(this)         		.inflate(R.layout.tab_indicator, tw, false);         TextView tvTab4 = (TextView)tabIndicator4.getChildAt(1);         ImageView ivTab4 = (ImageView)tabIndicator4.getChildAt(0);         ivTab4.setBackgroundResource(R.drawable.selector_mood_wall);         tvTab4.setText(R.string.buttom_message);	}		}